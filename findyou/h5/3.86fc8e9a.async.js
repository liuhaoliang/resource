(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{Atqw:function(t,e,a){},FWdt:function(t,e,a){t.exports={wrapper:"wrapper___VpDDg",groupList:"groupList___2LNPj"}},GOvT:function(t,e,a){"use strict";a.r(e);a("XGli");var s=a("NHyu"),o=(a("ZPo2"),a("nj1r")),i=(a("HVTF"),a("OT5E")),n=(a("puyI"),a("xZH1")),r=(a("e3Tq"),a("n+tp")),h=a("q1tI"),c=a.n(h),d=a("xsBw"),l=a("WRE1"),p=a("FWdt"),m=a.n(p),u=a("eOZ3"),v=a("dCQc"),w=a("3a4m"),g=a.n(w),b=a("+n12"),C=(a("5aHp"),a("dzEL"));a("Atqw");class E extends h["Component"]{constructor(){super(...arguments),this.state={visible:!1,name:""},this.group_id="",this.show=((t,e)=>{this.group_id=t,this.setState({visible:!0,name:e})}),this.hide=(t=>{this.setState({visible:!1},()=>{"function"===typeof t&&t(),this.setState({name:""})})}),this.submit=(()=>{var t=this.props.onChangeNameSuccess,e=this.state.name;e?Object(v["a"])({body:{group_id:this.group_id,name:e}}).then(e=>{var a=e||{},s=(a.data,a.status),o=a.msg,n=void 0===o?"\u64cd\u4f5c\u5931\u8d25":o;s?(this.hide(()=>{i["a"].success("\u64cd\u4f5c\u6210\u529f")}),t&&t()):i["a"].show(n)}):i["a"].show("\u8bf7\u8f93\u5165\u65b0\u7684\u7fa4\u7ec4\u6635\u79f0")})}render(){var t=this.state,e=t.visible,a=t.name;return c.a.createElement(n["a"],{visible:e,transparent:!0,onClose:this.hide,title:"\u8bbe\u7f6e\u7fa4\u7ec4\u6635\u79f0",footer:[{text:"\u53d6\u6d88",onPress:this.hide},{text:"\u786e\u5b9a",onPress:this.submit}]},c.a.createElement("div",{style:{height:40}},c.a.createElement(C["a"],{value:a,labelNumber:3,maxLength:5,placeholder:"\u8bf7\u8f93\u5165\u7fa4\u7ec4\u6635\u79f0",onChange:t=>{this.setState({name:t})}},"\u540d\u79f0:")))}}var f=a("3rPQ");a.d(e,"default",function(){return j});var _=r["a"].Item,S=n["a"].alert;class j extends h["Component"]{constructor(){super(...arguments),this.state={dataList:[]},this.loadData=(()=>{Object(v["e"])().then(t=>{var e=t||{},a=e.data,s=void 0===a?[]:a,o=e.status,n=e.msg,r=void 0===n?"\u67e5\u8be2\u5931\u8d25":n;this.setState({dataList:s}),o||i["a"].show(r)})}),this.showActionSheet=((t,e)=>{var a=f["a"].getUid()===e,s=a?"\u89e3\u6563\u7fa4\u7ec4":"\u9000\u51fa\u7fa4\u7ec4",i=["\u597d\u53cb\u5730\u56fe","\u7fa4\u7ec4\u4fe1\u606f","\u4fee\u6539\u6635\u79f0",s];o["a"].showActionSheetWithOptions({options:i,message:"\u9009\u62e9\u64cd\u4f5c",maskClosable:!0,"data-seed":"logId"},e=>{0===e?g.a.push({pathname:"/map",search:Object(b["c"])({group_id:t})}):1===e?g.a.push({pathname:"/groupinfo",search:Object(b["c"])({group_id:t})}):2===e?this.showRenameModal(t):3===e&&S("\u63d0\u793a","\u786e\u8ba4".concat(s,"\uff1f"),[{text:"\u53d6\u6d88"},{text:s,onPress:()=>this.outGroupAction(t)}])})}),this.showRenameModal=(t=>{Object(v["f"])({group_id:t}).then(e=>{var a=e||{},s=a.data,o=a.status,n=a.msg,r=void 0===n?"\u67e5\u8be2\u5931\u8d25":n;if(o){var h=s||{},c=h.nickname,d=void 0===c?"":c;this.renameModal.show(t,d)}else i["a"].show(r)})}),this.outGroupAction=(t=>{Object(v["g"])({group_id:t}).then(t=>{var e=t||{},a=(e.data,e.status),s=e.msg,o=void 0===s?"\u64cd\u4f5c\u5931\u8d25":s;a?(i["a"].show("\u9000\u51fa\u7fa4\u7ec4\u6210\u529f"),this.loadData()):i["a"].show(o)})})}componentDidMount(){this.loadData()}render(){var t=this.state.dataList,e=t.map(t=>{var e=t.name,a=(t.code,t.id),s=t.owner;return c.a.createElement(_,{arrow:"horizontal",platform:"android",onClick:()=>{this.showActionSheet(a,s)}},e)});return c.a.createElement(u["a"],{title:"\u7fa4\u7ec4",pathname:this.props.location.pathname},c.a.createElement("div",{className:m.a.wrapper},c.a.createElement(r["a"],{renderHeader:()=>"\u5df2\u52a0\u5165\u7684\u7fa4\u7ec4",className:m.a.groupList},e),c.a.createElement("div",null,c.a.createElement(s["a"],{className:m.a.item,onClick:this.createGroup,onClick:()=>this.createCroupModal.show()},"\u521b\u5efa\u7fa4\u7ec4"),c.a.createElement(s["a"],{className:m.a.item,onClick:()=>this.joinCroupModal.show()},"\u52a0\u5165\u7fa4\u7ec4"),c.a.createElement(d["a"],{ref:t=>this.createCroupModal=t,onCreateSuccess:()=>{this.loadData()}}),c.a.createElement(l["a"],{ref:t=>this.joinCroupModal=t,onJoinSuccess:()=>{this.loadData()}}),c.a.createElement(E,{ref:t=>this.renameModal=t}))))}}}}]);